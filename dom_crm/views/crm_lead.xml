<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <!-- Inherit Form View to Modify it -->
    <record id="dom_crm_kanban" model="ir.ui.view">
        <field name="name">Dom CRM Kanban</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_kanban_view_leads"/>
        <field name="arch" type="xml">

            <xpath expr="//div/field[@name='tag_ids']" position="before">
                <t t-if="record.date_deadline.raw_value and record.date_deadline.raw_value lt (new Date())" t-set="red">
                    oe_kanban_text_red
                </t>
                <span t-attf-class="#{red || ''}">
                    <i>
                        <field name="date_deadline"/>
                    </i>
                </span>
            </xpath>

        </field>
    </record>

    <record id="dom_crm_form" model="ir.ui.view">
        <field name="name">Dom CRM Form</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_form_view_leads"/>
        <field name="arch" type="xml">

            <xpath expr="//field[@name='website']" position="after">
                <field name="partner_dep"/>
                <field name="partner_famille"/>
                <field name="partner_category" widget="many2many_tags"/>
            </xpath>

            <xpath expr="//field[@name='state_id']" position="attributes">
                <attribute name="placeholder">Région</attribute>
            </xpath>

        </field>
    </record>

    <record id="dom_crm_tree" model="ir.ui.view">
        <field name="name">Dom CRM Tree</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_tree_view_oppor"/>
        <field name="arch" type="xml">

            <xpath expr="//tree" position="attributes">
                <attribute name="decoration-danger"> current_date > date_deadline</attribute>
            </xpath>

            <xpath expr="//field[@name='date_deadline']" position="attributes">
                <attribute name="invisible">False</attribute>
            </xpath>

        </field>
    </record>


    <record id="dom_crm_form_oppor" model="ir.ui.view">
        <field name="name">Dom CRM Form</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_form_view_oppor"/>
        <field name="arch" type="xml">


            <xpath expr="//field[@name='phone']" position="after">
                <field name="partner_dep"/>
                <field name="partner_famille"/>
                <field name="partner_category" widget="many2many_tags"/>
            </xpath>

        </field>
    </record>

    <record id="view_create_opportunity_simplified" model="ir.ui.view">
        <field name="name">Dom CRM Form Simplified</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.view_create_opportunity_simplified"/>
        <field name="arch" type="xml">

            <xpath expr="//field[@name='priority']" position="after">
                <field name="partner_dep" invisible="1"/>
                <field name="partner_famille" invisible="1"/>
                <field name="partner_category" invisible="1"/>
            </xpath>

        </field>
    </record>

    <record id="crm_case_form_view_oppor_devis" model="ir.ui.view">
        <field name="name">Dom CRM Form Opp Devis</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="sale_crm.crm_case_form_view_oppor"/>
        <field name="arch" type="xml">

            <xpath expr="//button[@name='410']/div/span" position="replace">
                <span class="o_stat_text"> Devis </span>
            </xpath>

        </field>
    </record>


    <record id="crm_crm_lead_inherit" model="ir.ui.view">
        <field name="name">Dom CRM Form Opp Devis</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm_yzi.crm_crm_lead_inherit"/>
        <field name="arch" type="xml">

            <xpath expr="//field[@name='service_informatique']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

        </field>
    </record>



    <record model="ir.ui.menu" id="crm_yzi.menu_crm">
        <field name="active" eval="False"/>
    </record>

    <menuitem parent="crm.crm_menu_root" name="Opportunités" id="crm.crm_menu_pipeline" sequence="2"/>
    <menuitem parent="crm.crm_menu_root" id="crm.res_partner_menu_crm" sequence="3"/>
    <menuitem parent="crm.crm_menu_root" id="crm_yzi.crm_yzi_tdb" sequence="0"/>
    <menuitem parent="crm.crm_menu_root" id="crm.menu_crm_leads" sequence="1"/>

</odoo>
